(using_atk_version): 1.0
(project):
    name: Expressions Dataset
    description: A Dataset of video clips for facial expressions

    commands: &commands
        download: python3 download.py videos.csv
        update_count: !language/ruby |
            require 'csv'
            require 'set'
            require 'atk_toolbox'
            videos = CSV.read(Info["paths"]["video_source"])
            expressions = {}
            expression_helper = {}
            for each_key, each_value in Info["expressions"]
                expressions[each_key] = 0
                expression_helper[each_key] = Set.new
            end
            videos.shift
            for each in videos
                if each[0].is_a?(String)
                    label = each[0]
                    url = each[1]
                    expressions[label] = expressions[label] + 1
                    # assume 1 person per url
                    expression_helper[label].add(url)
                end
            end
            for each_key, each_value in expressions
                Info.set_key(["expressions", each_key, "number_of_examples"], each_value)
                Info.set_key(["expressions", each_key, "number_of_people"], expression_helper[each_key].size)
            end

    dependencies: &dependencies
        atk: 0.0.1
        python: 3.7.3
        {pip: 19.0.3}:
            moviepy: 1.0.0
            youtube-dl: 2019.07.27

    (advanced_setup):
        (put_new_dependencies_under): [(project), basic_info, dependencies]
        # caveats for a specific OS
        when(--os is 'mac'):
            (project_commands):
                <<: *commands
            (dependencies):
                <<: *dependencies
        when(--os is 'windows'):
            (project_commands):
                <<: *commands
            (dependencies):
                <<: *dependencies
        when(--os is 'linux'):
            (project_commands):
                <<: *commands
            (dependencies):
                <<: *dependencies
paths:
    video_source: videos.csv

expressions:
    blink:
        number_of_people: 5
        number_of_examples: 10
    pressed_eyebrows:
        number_of_people: 3
        number_of_examples: 4
    raised_eyebrows:
        number_of_people: 3
        number_of_examples: 6
    squinting:
        number_of_people: 0
        number_of_examples: 0
    head_nod:
        number_of_people: 0
        number_of_examples: 0
    head_shake:
        number_of_people: 0
        number_of_examples: 0
    forehead_touch:
        number_of_people: 1
        number_of_examples: 1
    chin_touch:
        number_of_people: 1
        number_of_examples: 2
    neck_touch:
        number_of_people: 0
        number_of_examples: 0
    long_stare:
        number_of_people: 0
        number_of_examples: 0
    o_shaped_lips:
        number_of_people: 0
        number_of_examples: 0
    chin_down:
        number_of_people: 0
        number_of_examples: 0
    lean_forward:
        number_of_people: 0
        number_of_examples: 0
    slouching:
        number_of_people: 0
        number_of_examples: 0
    looking_at_source:
        number_of_people: 0
        number_of_examples: 0

common non-recorded expression:
  - smiles
  - sneer (muscles around nose)
  - hand gestures of various types
  - eye motions (thinking eyes)
  - full head/neck motions:
      - titing head to a side
      - pushing head forward or backwards
      - very small very quick tilt to one side ("well at least *that* worked")
  - the width of the eyes

other expressions:
  - nose touching


good_sources:
  - https://www.youtube.com/watch?v=ycPr5-27vSI
  - https://www.youtube.com/watch?v=16J-lCSSMVA
  - https://www.youtube.com/watch?v=G8lopnQFj5s
  - https://www.youtube.com/watch?v=aIEubcoBMts
  - https://www.youtube.com/watch?v=M-fW_imOsC0
  - https://www.youtube.com/watch?v=W5CSO3Opix8
  - youtube livestream webcam category
  - youtube coding livestream
  - joe rogan podcast
  - music reviews
  - book reviews
  - online meetups (video chats)

challenges:
  - A bit discouraging with how non-binary expressions are. Forcing them into categories feels inaccurate
  - video contents:
      - multiple faces (very hard to get one face with genuine expressions)
      - people not directly facing the camera
      - glasses, headphones, hats, microphones
      - shaky video
      - lighting
      - |
        single faces are generally people actively talking or interviewing, not being passive.
        People who are passive are generally participating in something else, and usually that means other faces are on screen
        This means very little
      - face touching
      - neck touching
      - slouching/hunching

  - expressions often happen in well under 1 second
  - suprisingly hard to tell for some expressions. Some people/lighting makes it obvious and others make it very difficult
  - there's no great definition of an expression


